## Build TODO: Only when editor is built!
ADD_DEFINITIONS(-DM_PACKAGE_WRITABLE -DNEO2D_DLL)
SET(CMAKE_SHARED_LIBRARY_PREFIX "")

## Build
INCLUDE_DIRECTORIES(
		${NEO_COMMON_INCLUDE_DIR}
		${NEO_CORE_INCLUDE_DIR}
		${NEO_ENGINE_INCLUDE_DIR}
		${CMAKE_CURRENT_SOURCE_DIR}/include
		${GTEST_INCLUDE_DIR}
)

SET(HEADERS
	include/Neo2D.h
	include/Object2D.h
	include/Container.h
	include/Widget.h include/LayoutStrategy.h include/FilterStrategy.h include/Event.h include/MouseEvents.h)

SET(SOURCES
	src/Object2D.cpp
	src/Widget.cpp src/Event.cpp)

IF(NOT ANDROID AND NOT EMSCRIPTEN)
	ADD_LIBRARY(Neo2D SHARED ${SOURCES} ${HEADERS})
ELSEIF(ANDROID)
	ADD_LIBRARY(Neo2D STATIC ${SOURCES} ${HEADERS})
ELSEIF(EMSCRIPTEN)

ENDIF()

IF(NOT NO_TESTS)
	ADD_EXECUTABLE(Neo2DTest tests/main.cpp tests/Object2DTest.cpp tests/ContainerTest.cpp tests/EventTest.cpp)
	TARGET_LINK_LIBRARIES(Neo2DTest Neo2D ${NEO_CORE_LIBRARIES} ${NEO_ENGINE_LIBRARIES} ${GTEST_LIBRARIES})
ENDIF()

# Needed for windows
TARGET_LINK_LIBRARIES(Neo2D ${NEO_CORE_LIBRARIES} ${NEO_ENGINE_LIBRARIES})

INSTALL(TARGETS Neo2D DESTINATION ${NEO_INSTALL_DIR})
INSTALL(TARGETS Neo2D DESTINATION ${NEO_INSTALL_DIR}/SDK/lib)
INSTALL(FILES ${HEADERS} DESTINATION ${NEO_INSTALL_DIR}/SDK/include/Neo2D)

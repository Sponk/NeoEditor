## Find source and headers
FILE(GLOB_RECURSE HEADERS *.h)
FILE(GLOB_RECURSE SOURCES *.c*)

IF(CMAKE_HAS_SORT)
  LIST(SORT HEADERS)
  LIST(SORT SOURCES)
ENDIF(CMAKE_HAS_SORT)

## Build
INCLUDE_DIRECTORIES(
    ${FLTK_INCLUDE_DIR}
    ${RAKNET_INCLUDE_DIR}
    ${ZLIB_INCLUDE_DIR}
    ${MCORE_INCLUDE_DIR}
    ${LIBZIP_INCLUDE_DIR}
)

ADD_DEFINITIONS(-DDEFAULT_HOST="neo-engine.de")

SET(CMAKE_INSTALL_RPATH "@loader_path/.")
ADD_EXECUTABLE(NeoStore ${SOURCES} ${HEADERS})

IF(WIN32 AND "${CMAKE_CXX_COMPILER_ID}" STREQUAL "GNU")
    SET(WINSOCK_LIBRARIES ws2_32)
ENDIF()

TARGET_LINK_LIBRARIES(NeoStore
  ${FLTK_LIBRARIES}
  fltk_images
  ${MCORE_LIBRARIES}
  ${ZLIB_LIBRARIES}
  ${LIBZIP_LIBRARIES}
  ${WINSOCK_LIBRARIES}
)

INSTALL(TARGETS NeoStore DESTINATION ${NEO_INSTALL_DIR})

